@{
    ViewBag.Title = "Documents";
}

<h4><i class="icon-file-alt"></i> Documents</h4>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span2">
            <ul class="nav nav-pills nav-stacked document-collections">
                <li class="active">
                    <a href="#">
                        <div class="collection-color-strip rainbow-gradient"></div>
                        <span>All Documents</span>
                        <span>(5)</span>
                    </a>
                </li>
                <li><a href="#">Blahs (3)</a></li>
                <li><a href="#">Songs (2)</a></li>
            </ul>
        </div>
        <div class="span10" data-bind="with: documents">
            <table id="documentsTable" class="table table-striped table-hover datatable">
                <thead>
                    <tr data-bind="visible: columns().length > 0">
                        <th>
                            <img class="row-check" data-bind="click: toggleAllRowsChecked, attr: { src: allRowsChecked() ? '/content/images/checked.png' : '/content/images/unchecked.png' }" />
                        </th>
                        <!-- ko foreach: columns -->
                        <th data-bind="text: $data"></th>
                        <!-- /ko -->
                    </tr>
                </thead>
                <tbody data-bind="foreach: rows, delegatedHandler: 'click'">
                    <tr class="document-row" data-bind="css: { checked: isChecked }">
                        <td>
                            <img class="row-check" data-click="toggleChecked" data-bind="attr: { src: isChecked() ? '/content/images/checked.png' : '/content/images/unchecked.png' }" />
                        </td>
                        <!-- ko foreach: cells -->
                        <td>
                            <!-- ko if: templateName == 'colored-id-cell-template' -->
                            <a href="#" data-bind="attr: { href: '/document/?id=' + value }, text: value"></a>
                            <!-- /ko -->
                            <!-- ko if: templateName == 'id-cell-template' -->
                            <a href="#" data-bind="attr: { href: '/document/?id=' + value }, text: value"></a>
                            <!-- /ko -->
                            <!-- ko if: templateName == 'default-cell-template' -->
                            <span data-bind="text: value"></span>
                            <!-- /ko -->
                        </td>
                        <!-- /ko -->
                    </tr>
                </tbody>
            </table>

            <div data-bind="style: { visibility: isLoading() ? 'visible':'hidden' }" class="progress progress-striped active documents-progress">
                <div class="bar" style="width: 100%;"></div>
            </div>
        </div>
    </div>
</div>
@*<div class="progress progress-striped active">
                <div class="bar" style="width: 40%; height: 5px; margin-top: -20px;"></div>
            </div>*@

<script type="text/javascript" src="/Scripts/Extensions/observableExtensions.js"></script>
<script type="text/javascript" src="/Scripts/Controls/dataTable.js"></script>
<script type="text/javascript" src="/Scripts/ViewModels/documentsViewModel.js"></script>
<script type="text/javascript">

    $(function () {
        ko.applyBindings(new RavenStudio.DocumentsViewModel());
    });

</script>
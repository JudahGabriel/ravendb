define(["require","exports","durandal/plugins/router","durandal/app","models/database","common/raven"],function(n,t,i,r,u,f){var e=i,o=r,h=u,s=f;return function(){function n(){this.router=e,this.databases=ko.observableArray(),this.activeDatabase=ko.observable().subscribeTo("ActivateDatabase"),this.ravenDb=new s}return n.prototype.databasesLoaded=function(n){this.databases(n),this.databases()[0].activate()},n.prototype.search=function(){o.showMessage("Search not yet implemented...")},n.prototype.activate=function(){var n=this;return this.ravenDb.databases().then(function(t){return n.databasesLoaded(t)}).then(function(){return e.activate("documents")})},n}()})
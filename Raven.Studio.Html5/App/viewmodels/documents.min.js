define(["require","exports","models/database","models/collection","common/raven"],function(n,t,i,r,u){var s=i,f=r,e=u,o=function(){function n(){this.displayName="documents",this.collections=ko.observableArray(),this.selectedCollection=ko.observable().subscribeTo("ActivateCollection"),this.collectionColors=[],this.ravenDb=new e}return n.prototype.activate=function(){var n=this;this.ravenDb.collections().then(function(t){return n.loadCollections(t)})},n.prototype.loadCollections=function(n){var r=this,u=7,t,i;n.forEach(function(n,t){return n.colorClass="collection-style-"+t%u}),t=new f("All Documents"),t.colorClass="all-documents-collection",t.documentCount=ko.computed(function(){return r.collections().filter(function(n){return n!==t}).map(function(n){return n.documentCount()}).reduce(function(n,t){return n+t},0)}),i=[t].concat(n),this.collections(i)},n.prototype.canDeactivate=function(){return!0},n}();t.documents=o})
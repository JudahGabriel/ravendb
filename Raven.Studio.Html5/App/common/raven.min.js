define(["require","exports","models/database"],function(n,t,i){var r=i;return function(){function n(){this.baseUrl="http://localhost:8080"}return n.prototype.databases=function(){var n=$.Deferred();return this.fetch("/databases",{pageSize:1024}).done(function(n){return console.log("results!",n)}).done(function(t){var i=t.map(function(n){return new r(n)});n.resolve(i)}),n},n.prototype.collections=function(){this.requireActiveDatabase();return this.fetch("/terms/Raven/DocumentsByEntityName",{field:"Tag",fromValue:"",pageSize:100},n.activeDatabase())},n.prototype.requireActiveDatabase=function(){if(!n.activeDatabase())throw new Error("Must have an active database before calling this method.");},n.prototype.fetch=function(n,t,i){return $.ajax({cache:!1,url:this.baseUrl+(i?"/databases/"+i.name:"")+n,data:t})},n.activeDatabase=ko.observable().subscribeTo("ActivateDatabase"),n}()})